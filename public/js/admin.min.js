jQuery(document).ready(function(o){"use strict";function i(e){var i,t=o("#tk-cookie-manager-templates__cookies__cookie-group").html(),a=n.find('[data-target="cookie-group-container"]');return null===(e=o.extend({id:null,active:!0,required:!1,name:"",description:"",cookies:[]},void 0!==e?e:{})).id&&(e.id=parseInt(n.find('[name="tk_cookie_manager[cookies][cookies][increment]"]').val())+1,n.find('[name="tk_cookie_manager[cookies][cookies][increment]"]').val(e.id)),t=t.replace(/#groupId#/g,e.id).replace(/#active#/g,e.active?"checked":"").replace(/#required#/g,e.required?"checked":"").replace(/#name#/g,e.name).replace(/#description#/g,e.description).trim(),i=a.append(t).sortable({handle:".sort-handle",placeholder:"ui-state--highlight"}).children().last(),e.cookies.length&&o.each(e.cookies,function(e,t){c(i,t)}),a.prev(".notice").hide(),i}function a(e){var t=o("#"+e);if("wysiwyg"===t.data("editor"))wp.editor.initialize(e,{tinymce:{plugins:r.editor.plugins,toolbar1:r.editor.toolbar1,toolbar2:r.editor.toolbar2},quicktags:r.editor.quicktags,mediaButtons:r.editor.mediaButtons});else{var i=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};i.codemirror=_.extend({},i.codemirror,{mode:t.data("editor")}),window.setTimeout(function(){wp.codeEditor.initialize(t,i)},250)}}var r,n,c;r=TkCookieManagerConfig,n=o("#tk-cookie-manager-form"),c=function(e,t){var i=o("#tk-cookie-manager-templates__cookies__cookie").html(),a=e.find('[data-target="cookie-container"]');return t=o.extend({active:!0,name:"",provider:"",providerUrl:"",lifetime:"",cookieNames:"",description:"",html:""},void 0!==t?t:{}),i=i.replace(/#cookieId#/g,e.attr("data-cookie-increment")).replace(/#groupId#/g,e.data("cookie-group-id")).replace(/#active#/g,t.active?"checked":"").replace(/#name#/g,t.name).replace(/#provider#/g,t.provider).replace(/#providerUrl#/g,t.providerUrl).replace(/#lifetime#/g,t.lifetime).replace(/#cookieNames#/g,t.cookieNames).replace(/#description#/g,t.description).replace(/#html#/g,t.html).trim(),e.find("[data-cookies]").text(parseInt(e.find("[data-cookies]").text())+1),e.attr("data-cookie-increment",parseInt(e.attr("data-cookie-increment"))+1),a.append(i).sortable({handle:".sort-handle",placeholder:"ui-state--highlight"}),a.prev(".notice").hide(),a.children().last()},n.find("[data-editor]").each(function(){-1===o(this).attr("id").indexOf("#")&&a(o(this).attr("id"))}),n.on("click",'[data-action="add-cookie-group"]',function(){var e=i();e.find("> .item-header").trigger("click"),e.find('[data-trigger="cookie-group-title"]').focus()}),n.on("click",'[data-action="add-cookie"]',function(){var e=c(o(this).closest("li"));e.find("> .item-header").trigger("click"),e.find('[data-trigger="cookie-title"]').focus()}),n.on("click",".item-header",function(){var i=o(this).closest("li"),e=i.children(".item-body");!e.is(":visible")&&e.attr("data-editors")&&(o.each(e.attr("data-editors").split(" "),function(e,t){a(i.attr("id")+"__"+t)}),e.removeAttr("data-editors")),o(this).closest("li").toggleClass("active").children(".item-body").slideToggle(250)}),n.on("click",'[data-action="delete"]',function(e){if(e.stopPropagation(),o(this).hasClass("dashicons-yes")){var t=o(this).closest("ul"),i=t.closest("li");o(this).closest("li").remove(),t.children().length||t.prev().show(),i.length&&i.find("[data-cookies]").text(parseInt(i.find("[data-cookies]").text())-1)}else o(this).toggleClass("dashicons-trash dashicons-yes"),window.setTimeout(function(e){e.toggleClass("dashicons-trash dashicons-yes")},5e3,o(this))}),n.on("keyup",'[data-trigger="cookie-group-title"], [data-trigger="cookie-title"]',function(){o(this).closest("li").find('> .item-header [data-target="title"]').text(o(this).val())}),n.submit(function(){o(this).find("[data-template-container]").remove()}),o.each(r.cookieGroups,function(e,t){i(t)}),n.find("[data-toggle-container]").change(function(){var e=n.find(o(this).data("toggle-container"));-1<o(this).data("toggle-values").split(",").indexOf(o(this).val())?e.show().find("input, select, textarea").first().focus():e.hide()}),n.submit(function(e){n.parent().removeClass("was-validated"),n.find("[data-toggle-container]").each(function(){n.find(o(this).data("toggle-container")).find("input, select, textarea").prop("disabled",-1===o(this).data("toggle-values").split(",").indexOf(o(this).val()))}),n.get(0).checkValidity()||(n.parent().addClass("was-validated"),e.preventDefault(),e.stopPropagation(),o(":invalid").parentsUntil("#tk-cookie-manager-form","li:not(.active)").find("> .item-header").trigger("click"))})});
//# sourceMappingURL=admin.min.js.map
